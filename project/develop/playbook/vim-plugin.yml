---
- hosts: "{{ group }}"
  vars_files:
    - ../inventory/vars/{{ group }}
  remote_user: wuzhongyang
  tasks:
    - name: 复制.NERDTreeBookmarks文件 
      file: 
        src: "{{ home_tool_dir }}/.NERDTreeBookmarks" 
        dest: "{{ home_dir }}/.NERDTreeBookmarks" 
        owner: "{{ owner }}"
        group: "{{ owner_group }}" 
        state: link
    - name: 拷贝YouCompleteMe
      copy: 
        src: ../release/YouCompleteMe.tar
        dest: "{{ home_dir }}/.vim/bundle/YouCompleteMe.tar"
      tags: ycm 
    - name: 解压缩YouCompleteMe
      unarchive: 
        src: "{{ home_dir }}/.vim/bundle/YouCompleteMe.tar"
        dest: "{{ home_dir }}/.vim/bundle"
        remote_src: true
      tags: ycm 
    - name: 删除YCM的tar包 
      file:
        path: "{{ home_dir }}/.vim/bundle/YouCompleteMe.tar"
        state: absent 
      tags: ycm 
    # 以下三项改为makefile执行
    # - name: 安装YouCompleteMe(依赖golang, node)
    #   # 支持c/c++/c#需要添加参数--clang-completer 
    #   shell: source {{ home_dir }}/.bash_profile && python3 ./install.py --gocode-completer --tern-completer --clang-completer 
    #   args:
    #     chdir: "{{ home_dir }}/.vim/bundle/YouCompleteMe"
    #     executable: /bin/bash
    #   tags: ycm 
    # - name: 安装vim插件 
    #   shell: source {{ home_dir }}/.bash_profile && vim -c 'source {{ home_dir }}/.vimrc' +PluginInstall +qall
    #   ignore_errors: yes
    #   args:
    #     executable: /bin/bash
    #   tags: plugin 
    # - name: 安装vim中的go插件 
    #   # 需要zsh的支持
    #   shell: source {{ home_dir }}/.bash_profile && vim -c 'source {{ home_dir }}/.vimrc' +GoInstallBinaries +qall
    #   args:
    #     chdir: "{{ home_dir }}"
    #     executable: /bin/bash
    #   ignore_errors: yes
    #   tags: plugin 
